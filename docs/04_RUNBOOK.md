# 운영/실험 런북(Runbook)

## 실험 단위
- `pipeline_id`: 파이프라인 조합(임베딩/리트리벌/하이브리드/리랭크/필터)
- `testset_id`: 테스트셋 버전
- `run_id`: (pipeline_id, testset_id, timestamp)로 생성

## 추천 실험 순서
1) **Embedding 단독**: 동일 문장군(동의어/설명형/오타)에서 코사인 유사도 분포 확인
2) **Vector Retrieval 단독**: Recall@K, 오탐 유형(유사 카테고리 혼입) 수집
3) **Hybrid 추가**: BM25가 살리는 케이스 vs 벡터가 살리는 케이스 분해
4) **Re-rank 추가**: Top50→Top10에서 오탐 감소율/지연시간 증가 측정
5) **Filter 추가**: min_score/카테고리 필터/금칙어 규칙 적용 후, 오탐 감소 vs 누락 증가 트레이드오프 측정

## 실패 케이스 핸들링
- “욕실 매트”인데 “요가 매트”가 섞이면:
  - (a) 하이브리드 가중치 조정(lexical↑)
  - (b) 리랭커 추가
  - (c) 카테고리 메타데이터 필터(욕실 카테고리만)
  - (d) 점수 임계값(min_score) 상향

