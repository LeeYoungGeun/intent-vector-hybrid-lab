# 03. 테스트셋 설계 가이드

## 테스트셋의 목표
- “잘 되는 케이스”가 아니라 **모델/검색기술의 약점이 드러나는 케이스**를 포함해야 합니다.
- 특히 대표님 사례처럼 **목적어가 애매한 발화**가 성능을 가릅니다.

## 추천 테스트 카테고리(최소)
- A. 정확 상품명(정답이 1개로 수렴)
- B. 동의어/축약/오타
- C. 목적/설명형(“샤워실에 까는 미끄럼 방지”)
- D. 다의어/충돌(“매트”: 요가 vs 욕실)
- E. 잡음/인삿말/군더더기 포함
- F. 정책/FAQ 문의(검색이 아니라 상담 플로우로 보내야 하는 케이스)

## 파일 포맷(권장)
- `templates/testcases.example.tsv`
  - id, raw_text, intent_text, expected_doc_ids, expected_category, notes
- 정답은 “복수 허용”을 권장
  - 실제 상품/문서가 여러 개면 정답도 여러 개 가능

## 애매함(Clarify) 테스트
정답이 1개로 수렴하지 않는 케이스는 다음 중 하나로 라벨링합니다.
- `needs_clarification=true` (꼬리질문이 맞음)
- `safe_fallback=true` (검색 결과를 내보내지 말고 안내 문구/카테고리 선택 유도)

